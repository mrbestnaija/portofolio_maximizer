# Synthetic Data Generator (Phase 0 scaffolding)
# Backward-compatible defaults mirror the legacy generate_synthetic_ohlcv helper.

synthetic:
  generator_version: "v1"  # v0 = legacy; v1 = config-driven core generators + regimes
  dataset_id_strategy: "hash"  # hash | timestamped_hash
  seed: 123

  # Date range and frequency for synthetic OHLCV
  start_date: "2020-01-01"
  end_date: "2024-01-01"
  frequency: "B"  # Business days; future phases may add intraday (1min,5min) support

  # Tickers to synthesize (aligned with legacy defaults)
  tickers:
    - "AAPL"
    - "MSFT"

  market_condition: "efficient"  # efficient | inefficient | mixed
  profile: ""  # optional profile name from synthetic_data_profiles.yml
  regimes:
    enabled: true
    names: ["low_vol", "high_vol"]
    transition_matrix:
      - [0.9, 0.1]
      - [0.2, 0.8]
    params:
      low_vol:
        drift: 0.0004
        vol: 0.01
        jump_intensity: 0.0
        jump_mean: 0.0
        jump_std: 0.0
      high_vol:
        drift: -0.0002
        vol: 0.03
        jump_intensity: 0.02
        jump_mean: -0.02
        jump_std: 0.05

  correlation:
    mode: "static"  # static | factor | rolling | t_copula
    copula_df: 6
    target_matrix:  # optional; defaults to identity if empty
      - [1.0, 0.4]
      - [0.4, 1.0]

  price_model: "hybrid"  # gbm | ou | jump_diffusion | heston | hybrid
  volatility_model: "none"  # none | garch | stochastic_vol
  jump_diffusion:
    enabled: true
    intensity: 0.01
    jump_mean: 0.0
    jump_std: 0.03

  event_library:
    flash_crash:
      enabled: true
      prob: 0.0005
      impact_pct: 0.08
    vol_spike:
      enabled: true
      prob: 0.001
      multiplier: 2.5
    gap_risk:
      enabled: true
      prob: 0.0015
      impact_pct: 0.03
    bear_run:
      enabled: true
      prob: 0.0008
      drift_shift: -0.001
    liquidity_shock:
      enabled: true
      prob: 0.001
      impact_pct: 0.05
      vol_multiplier: 3.0
    macro_regime_change:
      enabled: true
      prob: 0.0005
      drift_shift: -0.0005
      vol_multiplier: 1.5

  persistence:
    output_root: "data/synthetic"
    partitioning: "by_ticker"  # by_ticker | combined
    keep_last: 3  # rotation target; enforcement will arrive with DVC wiring

  validation:
    enabled: true
    checks:
      - schema
      - monotonic_index
      - ohlcv_sanity
      - non_negative_prices

  features:
    enabled: true
    sma_windows: [5, 20]
    vol_windows: [10]
    return_horizons: [1, 5]
    rsi_windows: [14]
    macd: {fast: 12, slow: 26, signal: 9}
    bollinger: {window: 20, num_std: 2}
    zscore_windows: [20]
    factor_exposures: ["market"]

  # Future: DVC/local remote wiring (Phase 8)
  versioning:
    enabled: false
    remote_name: "localstore"
    remote_url: ""  # optional local path when enabled

  market_hours:
    seasonality:
      day_weights:
        "0": 1.0   # Monday
        "1": 0.95  # Tuesday
        "2": 1.05  # Wednesday
        "3": 1.1   # Thursday
        "4": 0.9   # Friday
      hour_weights:
        "9": 0.8
        "10": 1.1
        "11": 1.05
        "12": 0.9
        "13": 1.1
        "14": 1.2
        "15": 0.85

  microstructure:
    spread:
      bps: 5.0
      vol_beta: 20.0
      regime_widen: 1.5
    slippage:
      bps: 3.0
      shock_beta: 10.0
      size_beta: 0.1
    depth:
      base: 1000000.0
      vol_beta: 15.0
      min_depth: 50000.0
    order_flow:
      sigma: 0.15
      shock_beta: 0.8
      regime_bias: -0.1

  calibration:
    drift_multiplier: 1.0
    vol_multiplier: 1.0
    emit_stats: true
    source_path: ""  # optional parquet/csv for real-data calibration

  ml_generator:
    enabled: false
    backend: "timegan"  # timegan | diffusion | gan_stub
    checkpoint_dir: "models/synthetic/timegan_stub"
    train_epochs: 0
    batch_size: 64
    seq_len: 32
