# Quant Success Helper Configuration
# References:
# - Documentation/QUANTIFIABLE_SUCCESS_CRITERIA.md
# - Documentation/OPTIMIZATION_IMPLEMENTATION_PLAN.md
# - Documentation/SANITY_CHECK_COMPLETE.md

quant_validation:
  enabled: true
  validation_mode: forecast_edge  # drift_proxy | forecast_edge
  lookback_days: 365  # Align with quant-validation automation to grow sample size
  risk_free_rate: 0.04  # Annualized risk-free assumption per success doc
  benchmark_column: null  # Set to column name (e.g., 'SP500') when available
  capital_base: 25000  # Matches PRS readiness capital target

  # Forecast-edge validation uses rolling-window CV regression metrics to
  # measure whether the forecaster adds incremental predictive power versus
  # a baseline model (default: SAMOSSA).
  forecast_edge_cv:
    min_train_size: 180
    step_size: null  # Defaults to forecast_horizon
    max_folds: 2
    baseline_model: samossa

  success_criteria:
    # Production-ish but not absurdly strict; tuned so that
    # healthy regimes clear the bar while obviously weak ones
    # continue to be demoted to HOLD.
    min_annual_return: 0.00
    min_sharpe: 0.10
    min_sortino: 0.15
    max_drawdown: 0.40
    min_profit_factor: 1.00
    min_win_rate: 0.40
    min_expected_profit: 5.0
    # Forecast-edge criteria (used when validation_mode=forecast_edge).
    # These are intentionally modest; tighten after evidence accumulates.
    max_rmse_ratio_vs_baseline: 1.10
    min_directional_accuracy: 0.44  # Phase 7.9: Lowered from 0.50→0.45→0.44 to allow signals through for audit accumulation
    require_significance: false  # Loosen for TS exploration; can be re-enabled later
    min_information_ratio: 0.0   # Raises floor when significance required

  # Optional per-ticker overrides for success criteria; used by
  # models/time_series_signal_generator.TimeSeriesSignalGenerator when
  # building quant validation profiles. This allows asset-class-aware
  # expected_profit thresholds without changing the global floor.
  per_ticker:
    "BTC-USD":
      success_criteria:
        min_expected_profit: 75.0   # Require larger edge for crypto TS trades
    "CL=F":
      success_criteria:
        min_expected_profit: 75.0   # Crude oil: higher threshold due to volatility
    "AAPL":
      # Phase 7.9: Lowered thresholds per profitability remediation plan
      # Research-friendly floor so core/liquid names can still trade while
      # quant-validation samples accumulate (monitoring policy still flags tier).
      success_criteria:
        min_annual_return: 0.0
        max_drawdown: 0.35
        min_profit_factor: 1.0
        min_win_rate: 0.40  # Lowered from 0.50 to match default
        min_expected_profit: 5.0  # Lowered from 15.0 - was mathematically impossible

  bootstrap:
    n_samples: 400
    confidence_level: 0.95

  visualization:
    enabled: true               # Emit overview PNGs for dashboards/debugging
    output_dir: "visualizations/quant_validation"
    max_points: 200

  logging:
    enabled: true               # Persist JSONL entries for troubleshooting
    log_dir: "logs/signals"
    filename: "quant_validation.jsonl"
    tail_entries: 10            # Used by bash helpers when printing summaries
